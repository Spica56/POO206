{%extends 'plantilla.html'%}

{%block body%}

<div class="row m-1">
    <div class="col-6 form-container">
        <h2 class="display-4 mt-5 mb-5 titulo"> Vista de formulario</h2>
        <a href="/consulta" class="mx-3"> Abrir Vista Consulta</a>

        {% with mensajes= get_flashed_messages()%}
            {% if mensajes%}
                {% for msj in mensajes%}
                    <h4>{{ msj }}</h4>
                {% endfor %}
            {% endif %}
        {% endwith%}

        <form action="/guardarAlbum" method="post" class="form-transparent shadow-lg">
            <div class="mb-3">
                <input type="text" class="form-control" name="txtTitulo" placeholder="Titulo" value="{{ request.form.txtTitulo}}">
                {% if errores and errores.txtTitulo %}
                <p style="color:red">{{ errores.txtTitulo }}</p>
                {% endif %}
            </div>

            <div class="mb-3">
                <input type="text" class="form-control" name="txtArtista" placeholder="Artista" value="{{ request.form.txtArtista}}">
                {% if errores and errores.txtArtista %}
                <p style="color:red">{{ errores.txtArtista }}</p>
                {% endif %}
            </div>

            <div class="mb-3">
                <input type="number" class="form-control" name="txtAnio" placeholder="Año de publicación" value="{{ request.form.txtAnio}}">
                {% if errores and errores.txtAnio %}
                <p style="color:red">{{ errores.txtAnio }}</p>
                {% endif %}
            </div>

            <div class="d-grid gap-2">
                <button type="submit" class="btn btn-success">Guardar Álbum</button>
            </div>
        </form>


    </div> <!-- columna de 5-->

    <div class="col-6 list-container">
        <h2 class="titulo mt-5 ms-3">Albums Guardados</h2>
        <div class="table-responsive ms-3" style="max-width: 100%;">
            <table class="table table-striped table-hover text-start align-middle w-auto">
                <thead class="table-dark">
                    <tr>
                        <th scope="col">ID</th>
                        <th scope="col">Álbum</th>
                    </tr>
                </thead>
                <tbody>
                    {% for alb in albums %}
                    <tr>
                        <td>{{ alb.0 }}</td>
                        <td><a href="/detalle/{{ alb.0 }}">{{ alb.1 }}</a></td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    
</div><!--cierre del row-->
{%endblock%}